


- ğŸ‘‰ [ã€LeetCode ç›´é€šè½¦ã€‘ï¼š121 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºï¼ˆç®€å•ï¼‰](https://leetcode.com/problems/best-time-to-buy-and-sell-stock/description/)ã€é¢è¯•çœŸé¢˜ã€‘

è®¾å®šæœ€å¤§å€¼ max  ä¹°å…¥ç‚¹ buy

å¾ªç¯ä¸€æ¬¡ é‡åˆ° prices[i] å°äº buy æ›´æ–° buyÃ¥

æ¯”è¾ƒ prices[i] - buy ä¸ max æ›´æ–° max

```javascript
/**
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function(prices) {
    let len = prices.length;
    if(len === 1) return 0;
    let max = 0;
    let buy = prices[0];

    for(let i = 1; i < len; i++) {
        if(buy > prices[i]) {
            buy = prices[i];
        } else {
            max = Math.max(max, prices[i] - buy)
        }
    }
    return max;
};
```


- ğŸ‘‰ [ã€LeetCode ç›´é€šè½¦ã€‘ï¼š122 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIï¼ˆç®€å•ï¼‰](https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/description/)

å¤šæ¬¡ä¹°å…¥

è®¾å®š count æ ‡è¯† æ”¶å…¥
è®¾å®š min å½“å‰éå†çš„æœ€å°å€¼

for å¾ªç¯ å½“ prices[i] > prices[i+1]

count +=prices[i]-min

å½“ min > prices[i] æ›´æ–° min

```javascript
/**
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function (prices) {
    const len = prices.length;
    let count = 0;
    if (len === 1) return count;
    let min = prices[0];
    for (let i = 1; i < len; i++) {
        min = Math.min(min, prices[i])
        if (min < prices[i]) {
            if (prices[i + 1] < prices[i]) {
                count += prices[i] - min;
                min = prices[i + 1]
            } else if(i === len -1) {
                count += prices[i] - min
            }

        }
    }
    return count
};

```

ç¬¬äºŒç§ï¼š

åªè¦ä¸‹ä¸€æ¬¡æ¶¨å‰ä¸€æ¬¡é“å®šä¹°äº†


```javascript
/**
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function (prices) {
    let start = prices[0];
    let count = 0;
    let len = prices.length
    for (let i = 0; i < len; i++) {
        if (start < prices[i]) {
            count += prices[i] - start;
        }
        start = prices[i]
    }

    return count
};

```


- ğŸ‘‰ [ã€LeetCode ç›´é€šè½¦ã€‘ï¼š309 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«å†·å†»æœŸï¼ˆä¸­ç­‰ï¼‰](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/description/)

åŠ¨æ€è§„åˆ’æ¥è¿›è¡ŒçŠ¶æ€è½¬ç§»

```js

æœ‰å¦‚ä¸‹çŠ¶æ€ 
dp[i][0] ç¬¬iå¤©ç»“æŸæ—¶ï¼ŒæŒæœ‰è‚¡ç¥¨æ—¶çš„æœ€å¤§æ”¶ç›Š
dp[i][1] ç¬¬iå¤©ç»“æŸæ—¶ï¼Œä¸æŒæœ‰è‚¡ç¥¨ä¸”æ˜å¤©ä¸å¯ä»¥è´­ä¹°è‚¡ç¥¨æ—¶ï¼Œæœ€å¤§æ”¶ç›Š
dp[i][2] ç¬¬iå¤©ç»“æŸæ—¶ï¼Œä¸æŒæœ‰è‚¡ç¥¨ä¸”æ˜å¤©å¯ä»¥è´­ä¹°è‚¡ç¥¨æ—¶ï¼Œæœ€å¤§æ”¶ç›Š
å¦‚ä½•è½¬ç§»

dp[i][0] ä¹‹å‰æŒæœ‰ å½“å‰ä¹°çš„ ä¹‹å‰è‚¯å®šä¸æ˜¯å†·å†»æœŸ
--> 
Math.max(dp[i-1][0], dp[i-1][2] - prices[i])

dp[i][1] æ‰€ä»¥ä¹‹å‰æ˜¯æŒæœ‰ ä½†æ˜¯å–æ‰äº†
-->
dp[i-1][0] + prices[i]

dp[i][2] ä¹‹å‰å°±æ²¡æœ‰ 
-->
Math.max(dp[i-1][1], dp[i-1][2])


æœ€åæ‰‹ä¸Šä¸€å®šæ˜¯æ²¡æœ‰çš„åªéœ€è¦å– Math.maxï¼ˆdp[i][1] dp[i][2]ï¼‰

[-prices[0], 0, 0] å¼€å§‹ ç„¶åè¿›è¡ŒçŠ¶æ€è½¬ç§»
```

```javascript
/**
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function(prices) {
    let dp = [-prices[0], 0, 0];

    for(let i = 1; i < prices.length; i++) {
        const cur = prices[i];
        dp = [Math.max(dp[0], dp[2] - cur), dp[0] + cur, Math.max(dp[2], dp[1])]
    }

    return Math.max(...dp)
};

```



- ğŸ‘‰ [ã€LeetCode ç›´é€šè½¦ã€‘ï¼š714 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹ï¼ˆä¸­ç­‰ï¼‰](https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/description/)

```javascript

dp[i][0] ç¬¬iå¤©ç»“æŸæ—¶ï¼ŒæŒæœ‰è‚¡ç¥¨æ—¶çš„æœ€å¤§æ”¶ç›Š
dp[i][1] ç¬¬iå¤©ç»“æŸæ—¶ï¼Œä¸æŒæœ‰è‚¡ç¥¨æ—¶çš„æœ€å¤§æ”¶ç›Š

çŠ¶æ€è½¬ç§»ä¸º

dp[i][0] å‰ä¸€å¤©å°±æŒæœ‰ï¼Œ å½“å¤©ä¹°å…¥
-->
Math.max(dp[i-1][0], dp[i][1] - prices[i])


dp[i][1] å‰ä¸€å¤©æ²¡æœ‰ å½“å¤©å–å‡º
-->
Math.max(dp[i-1][0], dp[i][1] + prices[i] - fee)

```

```javacript

/**
 * @param {number[]} prices
 * @param {number} fee
 * @return {number}
 */
var maxProfit = function(prices, fee) {
    let [no, yes] = [0, -prices[0]];

    for(let i = 1; i < prices.length; i++) {
        const cur = prices[i];
        no = Math.max(yes + cur - fee, no);
        yes = Math.max(yes, no - cur)
    }

    return no
};
```

- ğŸ‘‰ [ã€LeetCode ç›´é€šè½¦ã€‘ï¼š123 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIIï¼ˆå›°éš¾ï¼‰](https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/)

```javascript
åªæœ‰ä¸¤æ¬¡ä¹°å…¥æ—¶æœº

dp[i][0] ç¬¬ i å¤©ç»“æŸæ—¶ æœ‰ä¸€æ¬¡ä¹°å…¥æ“ä½œ
dp[i][1] ç¬¬ i å¤©ç»“æŸæ—¶ ä¹°å…¥ä¸€æ¬¡å–å‡ºä¸€æ¬¡
dp[i][2] ç¬¬ i å¤©ç»“æŸæ—¶ ä¹°å…¥ä¸¤æ¬¡æ¬¡å–å‡ºä¸€æ¬¡ 
dp[i][3] ç¬¬ i å¤©ç»“æŸæ—¶ ä¹°å…¥ä¸¤æ¬¡æ¬¡å–å‡ºä¸¤æ¬¡æ¬¡ 

dp[i][0] ç¬¬ i-1 å¤© è´­å…¥ ä¸€æ¬¡ ç¬¬ i å¤©è´­å…¥
-->
Math.max(dp[i-1][0],  -prices[i])

dp[i][1] ç¬¬ i å¤© å–å‡ºä¸€æ¬¡ ç¬¬ i -1 ä¹°å…¥ä¸€æ¬¡å–å‡ºä¸€æ¬¡
-->
Math.max(dp[i][0] + prices[i], dp[i-1][1])

dp[i][2] ç¬¬ i å¤©ç»“æŸæ—¶ä¹°å…¥ å‰ä¸€å¤©å·²å®Œæˆ
-->
Math.max(dp[i-1][1] - prices[i], dp[i-1][2])

dp[i][3] ç¬¬ i å¤©ç»“æŸæ—¶å–å‡º å‰ä¸€å¤©å·²å®Œæˆ
-->
Math.max(dp[i-1][2] + prices[i], dp[i-1][3])

```

```javascript

/**
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function (prices) {
    let [buy1, sell1, buy2, sell2] = [-prices[0], 0, -prices[0], 0];

    for (let i = 1; i < prices.length; i++) {
        buy1 = Math.max(buy1, - prices[i]);
        sell1 = Math.max(buy1 + prices[i], sell1);
        buy2 = Math.max(sell1 - prices[i], buy2);
        sell2 = Math.max(buy2 + prices[i], sell2);
    }

    return sell2;
};

```
- ğŸ‘‰ [ã€LeetCode ç›´é€šè½¦ã€‘ï¼š188 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIVï¼ˆå›°éš¾ï¼‰](https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iv/description/)


```javascript
ä¹°å…¥ k æ¬¡  j ä»£è¡¨å½“å‰äº¤æ˜“å®Œæˆç¬”æ•°

j < prices.length  >> 1

buy[0][0] -prizes[0]

sell[0][0] 0

buy[i][j] ç¬¬ i å¤©ç»“æŸæŒæœ‰ ä¹‹å‰æŒæœ‰ å½“å¤©ä¹°å…¥

Math.max(buy[i-1][j], sell[i-1][j] - prices[i])

sell[i][j] ç¬¬ i å¤©ç»“æŸæœªæŒæœ‰ ä¹‹å‰æœªæŒæœ‰ å½“å¤©å–å‡º

Math.max(sell[i-1][j], buy[i-1][j-1] + prices[i])

```


```javascript


/**
 * @param {number} k
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function(k, prices) {
    if (!prices.length) {
        return 0;
    }
    const len = prices.length;
    const max =  Math.min(k, len >> 1);

    const buy = new Array(len).fill(0).map(item => new Array(max+1).fill(0))
    const sell = new Array(len).fill(0).map(item => new Array(max+1).fill(0))
    buy[0][0] = -prices[0];
    sell[0][0] = 0;

    for (let i = 1; i <= max; ++i) {
        buy[0][i] = sell[0][i] = Number.MIN_SAFE_INTEGER;
    }

    for(let i = 1; i < len; i++) {
        buy[i][0] = Math.max(buy[i-1][0], sell[i-1][0] - prices[i])
        for(let j = 1; j <= max; j ++) {
            buy[i][j] = Math.max(buy[i-1][j], sell[i-1][j] - prices[i])
            sell[i][j] = Math.max(buy[i-1][j-1] + prices[i], sell[i-1][j])
        }
    }

    return Math.max(...sell[len-1])
};
```


```javascript
/**
 * @param {number} k
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function(k, prices) {
    if (!prices.length) {
        return 0;
    }
    const len = prices.length;
    const max =  Math.min(k, len >> 1);

    const buy =  new Array(max+1).fill(Number.MIN_SAFE_INTEGER)
    const sell = new Array(max+1).fill(Number.MIN_SAFE_INTEGER)
    buy[0] = -prices[0];
    sell[0] = 0;

    for(let i = 1; i < len; i++) {
        buy[0] = Math.max(buy[0], sell[0] - prices[i])
        for(let j = 1; j <= max; j ++) {
            buy[j] = Math.max(buy[j], sell[j] - prices[i])
            sell[j] = Math.max(buy[j-1] + prices[i], sell[j])
        }
    }

    return Math.max(...sell)
};
```

